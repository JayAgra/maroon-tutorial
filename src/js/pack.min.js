class Page{constructor(pageTitle="Untitled Page",fileName="0.xml",uniqueID=0){this.src=fileName;this.title=pageTitle;this.id=uniqueID}}

const pageManifest = [
    new Page("interesting document", "0.xml", 0),
    new Page("i like being unproductive", "1.xml", 1),
    new Page("aaaaaa", "2.xml", 2),
    new Page("content system test", "test.xml", 4),
];

// quiz.js
function runQuiz(id,button){var answer=document.getElementById(id).getAttribute("data-answer");var selected=document.querySelector(`input[name="${ id }-radio"]:checked`);if(selected.value===answer){document.getElementsByName(`${ id }-radio`).forEach(box=>box.disabled=true);button.setAttribute("data-attempts",Number(button.getAttribute("data-attempts"))+1);button.disabled=true;selected.parentElement.style.color="#0f0";if(button.getAttribute("data-attempts")==="1"){button.innerHTML="correct on first try";button.style.color="#0f0"}else if(button.getAttribute("data-attempts")==="4"){button.innerHTML="failed";button.style.color="#f00"}else{button.innerHTML="correct in "+button.getAttribute("data-attempts")+" tries";button.style.color="#ff0"}}else{button.setAttribute("data-attempts",Number(button.getAttribute("data-attempts"))+1);selected.parentElement.style.color="#f00";selected.disabled="true"}}

// saveprogress.js
function setPageAsRead(pageUID=0,elementNumber=0){let cookieValue=document.cookie.split("; ").find((row)=>row.startsWith("735369a9857a9f670dea0="))?.split("=")[1];if(cookieValue===undefined||window.completepages===undefined){window.completepages=cookieValue===undefined?[pageUID]:cookieValue.split(",").map(element=>{return Number(element)});if(cookieValue===undefined){document.cookie=`735369a9857a9f670dea0=${ pageUID }`;document.getElementsByClassName("tocItem")[elementNumber].firstChild.className="tocItemHalign tocComplete"}}else{if(!cookieValue.split(",").map(element=>{return Number(element)}).includes(pageUID)){window.completepages.push(pageUID);document.cookie=`735369a9857a9f670dea0=${window.completepages.join(",")}`;document.getElementsByClassName("tocItem")[elementNumber].firstChild.className="tocItemHalign tocComplete";document.getElementById("progressIndicator").textContent=Math.round((cookieValue.split(",").length/pageManifest.length)*100)}}}

// startapp.js
pageManifest.forEach((e,i)=>{let c=document.createElement("div");c.className=i===0?"tocItem tocSelectedItem":"tocItem";c.setAttribute("pageID",e.id);let s=document.createElement("div");s.className="tocItemHalign";let t=document.createElement("span");t.className="tocItemTitleHolder";t.innerText=e.title;s.appendChild(t);c.appendChild(s);document.getElementsByClassName("tocContents")[0].appendChild(c)});const tocItems=Array.from(document.getElementsByClassName("tocItem"));window.currentPage=0;tocItems.forEach((tocItem)=>{tocItem.onclick=()=>{tocItems[window.currentPage].classList.remove("tocSelectedItem");loadPage(tocItems.indexOf(tocItem));tocItems[tocItems.indexOf(tocItem)].classList.add("tocSelectedItem")};tocItem.firstChild.classList=document.cookie.split("; ").find((row)=>row.startsWith("735369a9857a9f670dea0="))?.split("=")[1].split(",").includes(tocItem.getAttribute("pageid"))?"tocItemHalign tocComplete":"tocItemHalign tocIncomplete"});Array.from(document.getElementsByClassName("settingsTrigger")).forEach((item)=>{item.onclick=()=>{alert("i didnt implement this yet :~)")}});document.getElementById("progressIndicator").textContent=Math.round((document.cookie.split("; ").find((row)=>row.startsWith("735369a9857a9f670dea0="))?.split("=")[1].split(",").length/pageManifest.length)*100);

// contentload.js
function loadPage(pnum=0){const xhr=new XMLHttpRequest();xhr.open("GET",`src/pages/${pageManifest[pnum].src }`,true);xhr.onreadystatechange=async()=>{if(xhr.readyState===XMLHttpRequest.DONE){console.log("200 ok");document.getElementById("articleContentElement").innerHTML=xhr.responseText;hljs.highlightAll();window.currentPage=pnum;setPageAsRead(pageManifest[pnum].id,pnum);return}else if(xhr.status===401){console.log("401 failure")}else if(xhr.status===400){console.log("400 failure")}else if(xhr.status===500){console.log("500 failure")}else{console.log("awaiting response")}};xhr.send()}

